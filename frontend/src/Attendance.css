/* frontend/src/Attendance.css */

.attendance-container {
  max-width: 1100px;
  width: 100%;
  margin: 0 auto;
  font-family: 'Segoe UI', sans-serif;
  padding: 0;
}

/* --- Wybór dziecka --- */
.child-selector {
  margin-bottom: 25px;
  background: white;
  padding: 15px 20px;
  border-radius: 15px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.05);
  display: flex;
  align-items: center;
  gap: 15px;
}

.child-selector label { font-weight: 600; color: #555; }
.child-buttons { display: flex; gap: 10px; }

.child-btn {
  background: #f0f2f5;
  border: 1px solid transparent;
  padding: 8px 16px;
  border-radius: 20px;
  cursor: pointer;
  font-weight: 600;
  color: #555;
  display: flex; align-items: center; gap: 6px;
  transition: all 0.2s;
}

.child-btn.active {
  background: #f2c94c;
  color: #fff;
  box-shadow: 0 3px 10px rgba(242, 201, 76, 0.3);
}

.child-btn:focus, .child-btn:active, 
.modal-btn:focus, .modal-btn:active {
  outline: none;
  box-shadow: none;
}

/* --- Grid --- */
.attendance-grid {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 30px;
  align-items: start;
}

/* --- Karta Kalendarza --- */
.calendar-card {
  background: white;
  padding: 25px;
  border-radius: 20px;
  box-shadow: 0 5px 20px rgba(0,0,0,0.05);
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* --- KALENDARZ STYLIZACJA --- */
.react-calendar {
  width: 100%;
  max-width: 100%;
  border: none;
  font-family: 'Segoe UI', sans-serif;
}

.react-calendar__navigation button {
  font-size: 16px;
  font-weight: 700;
  color: #333;
}
.react-calendar__navigation button:enabled:hover,
.react-calendar__navigation button:enabled:focus {
  background-color: #f0f0f0;
  border-radius: 8px;
}

/* BAZOWY STYL KAFELKA */
.react-calendar__tile {
  padding: 15px 0;
  border-radius: 8px;
  font-weight: 700;
  font-size: 14px;
  margin-bottom: 5px;
  border: 1px solid transparent; /* Domyślny border przezroczysty */
  color: #000 !important; /* ZAWSZE CZARNY TEKST */
}

/* --- 1. OBECNY (ZIELONY) --- */
.react-calendar__tile:enabled {
  background-color: #e8f5e9; /* Jasny zielony */
  border: 1px solid #c8e6c9;
}
.react-calendar__tile:enabled:hover {
  background-color: #c8e6c9;
  cursor: pointer;
}

/* --- 2. NIEOBECNOŚĆ (POMARAŃCZOWY) --- */
.react-calendar__tile.absent-day {
  background-color: #fff3e0 !important; /* Pomarańczowy */
  border: 1px solid #ffb74d !important;
}
/* Usunięcie kropki */
.react-calendar__tile.absent-day::after { content: none !important; display: none !important; }

/* --- 3. DNI WOLNE (CZERWONY) --- */
.react-calendar__tile.closure-day:disabled {
  background-color: #ffebee !important;
  border: 1px solid #ef9a9a !important;
  opacity: 1 !important;
  cursor: not-allowed;
  color: #000 !important;
}

/* --- 4. WEEKENDY (PRZEKREŚLONE) --- */
.react-calendar__tile.weekend-day:disabled {
  background-color: #f5f5f5 !important;
  border: 1px solid #eee;
  color: #aaa !important;
  cursor: not-allowed;
  background-image: repeating-linear-gradient(45deg, #f5f5f5, #f5f5f5 10px, #e0e0e0 10px, #e0e0e0 12px);
}

/* --- 5. DZIEŃ DZISIEJSZY (SPECJALNE TRAKTOWANIE) --- */

/* A. Dziś (Domyślnie - Obecny) -> Ciemniejszy zielony + CZARNA RAMKA */
.react-calendar__tile--now {
  background-color: #a5d6a7 !important; /* Ciemniejszy zielony dla wyróżnienia */
  border: 2px solid #000000 !important;  /* Czarna ramka ZAWSZE */
  font-weight: 800 !important;
}

/* B. Dziś (Gdy jest Nieobecny) -> Pomarańczowy + CZARNA RAMKA */
.react-calendar__tile--now.absent-day {
  background-color: #fff3e0 !important;
  border: 2px solid #000000 !important;
}

/* --- 6. NAPRAWA KLIKNIĘCIA (ACTIVE/FOCUS) --- */
/* Te reguły zapobiegają zmianie koloru na biały po kliknięciu */

/* Kliknięcie w zwykły dzień (Obecny) */
.react-calendar__tile:enabled:focus,
.react-calendar__tile--active {
  background-color: #e8f5e9 !important; /* Pozostaje zielony */
  color: #000 !important;
  border: 1px solid #c8e6c9 !important;
  outline: none !important;
}

/* Kliknięcie w dzień Nieobecny */
.react-calendar__tile--active.absent-day,
.react-calendar__tile.absent-day:focus {
  background-color: #fff3e0 !important; /* Pozostaje pomarańczowy */
  border: 1px solid #ffb74d !important;
  color: #000 !important;
}

/* KLUCZOWE: Kliknięcie w DZISIAJ (Obecny) - ma zachować ciemną zieleń i ramkę */
.react-calendar__tile--now.react-calendar__tile--active,
.react-calendar__tile--now:enabled:focus {
  background-color: #a5d6a7 !important; /* Ciemniejszy zielony */
  border: 2px solid #000000 !important;  /* Czarna ramka */
  color: #000 !important;
}

/* KLUCZOWE: Kliknięcie w DZISIAJ (Nieobecny) - ma zachować pomarańcz i ramkę */
.react-calendar__tile--now.absent-day.react-calendar__tile--active,
.react-calendar__tile--now.absent-day:enabled:focus {
  background-color: #fff3e0 !important; /* Pomarańczowy */
  border: 2px solid #000000 !important;  /* Czarna ramka */
  color: #000 !important;
}

/* --- Legenda --- */
.calendar-legend {
  margin-top: 20px;
  display: flex;
  gap: 15px;
  font-size: 13px;
  color: #666;
  flex-wrap: wrap;
  justify-content: center;
}
.legend-item { display: flex; align-items: center; gap: 6px; }
.dot { width: 12px; height: 12px; border-radius: 4px; border: 1px solid rgba(0,0,0,0.1); }
.dot.green { background-color: #e8f5e9; border-color: #c8e6c9; }
.dot.orange { background-color: #fff3e0; border-color: #ffb74d; }
.dot.red { background-color: #ffebee; border-color: #ef9a9a; }
.dot.crossed { background-color: #f5f5f5; background-image: repeating-linear-gradient(45deg, transparent, transparent 2px, #ccc 2px, #ccc 3px); }

/* --- Prawy Panel --- */
.status-panel { display: flex; flex-direction: column; gap: 20px; }
.info-box {
  background-color: #e3f2fd;
  border-left: 5px solid #2196f3;
  padding: 20px;
  border-radius: 12px;
  color: #0d47a1;
}
.info-box h4 { margin: 0 0 10px 0; }
.info-box ul { padding-left: 20px; margin: 0; font-size: 13px; line-height: 1.5; }

.status-message {
  padding: 15px; border-radius: 12px; font-size: 14px;
  display: flex; align-items: center; gap: 10px; font-weight: 500;
}
.status-message.error { background-color: #ffebee; color: #c62828; border: 1px solid #ffcdd2; }
.status-message.success { background-color: #e8f5e9; color: #2e7d32; border: 1px solid #c8e6c9; }
.status-message.info { background-color: #fff3e0; color: #ef6c00; border: 1px solid #ffe0b2; }

/* --- MODAL (POPRAWKA NAPISÓW) --- */
.modal-overlay { 
  position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; 
  background-color: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; 
}

.modal-content { 
  background: white; padding: 30px; border-radius: 20px; 
  width: 90%; max-width: 400px; text-align: center; 
  box-shadow: 0 10px 30px rgba(0,0,0,0.2); 
}

.modal-content h3 { margin-top: 0; color: #333 !important; }
.modal-content p { color: #333 !important; font-size: 16px; margin-bottom: 25px; font-weight: 500; }

.modal-actions { display: flex; justify-content: center; gap: 15px; }

.modal-btn { 
  padding: 10px 20px; border: none; border-radius: 8px; font-weight: 700; 
  cursor: pointer; display: flex; align-items: center; gap: 8px; 
}
.modal-btn:focus { outline: none; }

.modal-btn.cancel { background-color: #f0f0f0; color: #333; }
.modal-btn.confirm.success { background-color: #f2c94c; color: #333; }
.modal-btn.confirm.danger { background-color: #e0245e; color: white; }

/* RWD */
@media (max-width: 768px) {
  .attendance-grid { grid-template-columns: 1fr; }
  .info-box { order: -1; }
}